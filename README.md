# API-Mobile-Banking
This is project backend API building with Spring boot MyBatis Open Source Persistence Framework for implement SQL Database.
# Database Schema 
# Tables Structure

Categories Table using Query run on Oracle support :

CREATE TABLE categories(
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255)
);

# Articles Table

CREATE TABLE articles(
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(255),
    description CLOB,
    cate_id NUMBER,
    status NUMBER(1) DEFAULT 1,
    CONSTRAINT fk_articles_categories FOREIGN KEY (cate_id) REFERENCES categories(id)
);

# Table Relationships

| Table   | Relationship | Relate Table | Foreign Key |

| articles| Many-to-One  | categories   | cate_id â†’ categories(id)|

# Relationship Diagram

![](src/main/resources/static/images/1.png)
 
# configure application properties connection with database Oracle

server.port=9000

spring.datasource.url=jdbc:oracle:thin:@//localhost:1521/orcl

spring.datasource.username=system

spring.datasource.password=123456

spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# From Data Validation with Bean Validator.

- spring boot validation dependency :

   implementation 'org.springframework.boot:spring-boot-starter-validation:3.5.4'

- Let's define a simple POJO, with field that we want to validate.

  * @NotEmpty: is used for constrain a field of type String Collection or Array to not be null or Empty.
  * @Min and @Max: are used to specify the limits of a variable.
  * @NotNull: tells spring boot the filed should not be null, but it can be empty.
  * @NotBlank: tells spring boot the filed should not be null and constrains at least one non whitespace character.
  * @Size: [min =x, max=y] is used define rules of the size a String Collection, or Array Map.
  * @Email: helps us to validate the string against a regex which defines the structure of a validate email.
  * @Positive: is used to strictly positive number.

# Create Procedure get_article_count

CREATE OR REPLACE FUNCTION get_article_count(
                    p_keyword IN VARCHAR2

) RETURN NUMBER

IS

v_article_count NUMBER;

BEGIN
SELECT COUNT(*)
INTO v_article_count

FROM articles

WHERE UPPER(title) LIKE '%' || UPPER(p_keyword) || '%';

    RETURN v_article_count;
EXCEPTION

WHEN OTHERS THEN
-- Return -1 to indicate error (or you could raise the exception)
RETURN -1;

END get_article_count;
/

# Common MyBatis Annotations

| Annotation | Purpose                                                                     | Example Usage |
|------------|-----------------------------------------------------------------------------|---------------|
| @Mapper    | Marks an interface as MyBatis mapper.<br> Required for Spring to detect it. | @Mapper       |
| @Select    | Execute a Sql **SELECT** Query a map the result.                            | @Select       |
| @Insert    | Execute a Sql **INSERT** insert to statement.                               | @Insert       |
| @Update    | Execute a Sql **UPDATE** statement.                                         | @Update       |
| @Delete    | Execute a Sql **DELETE** statement.                                         | @Delete       |
|            |                                                                             |               |

# Advance Mapping Annotations

| Annotation | Purpose                                                                  | Example Usage                                                                         |
|------------|--------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| @Results   | Define custom result mappings <br> between DB columns and object fields. | see below                                                                             |
| @Result    | Used inside **@Result** to map individual columns.                       | @Result(column "user_name",<br>property="name")                                       |
| @Option    | Sets options like **useGeneratedKeys** **keyProperty**, etc.             | @Options(useGeneratedKey =true, keyProperty"id")                                      |
| @Param     | Named method parameters for us Sql queries.                              | @Select("SELECT *FROM users <br> WHERE name =#{name)",with @Param("name") String name |

# Sql Dynamic Provider 
  
- Definition : allow you to write Dynamic sql logic in java methods instead of embedding it directly is annotation or XMl.

 | Annotations     | Purpose                                       |
|-----------------|-----------------------------------------------|
| @SelectProvider | Provides Dynamic SQL for **SELECT**  queries. |
| @InsertProvider | Provides Dynamic SQL for **INSERT**  queries. |
 | @UpdateProvider | Provides Dynamic SQL for **UPDATE**  queries. |
 | @DeleteProvider | Provides Dynamic SQL for **DELETE**  queries. |


# Benefits of SQL Providers

- Clean logic separation: Sql lives a dedicated class, not cluttering your mapper.
- Dynamic Flexibility: Easy build queries based on optional parameters.
- Reusable SQL fragments: You can centralize logic for multiple mappers.